(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(4298)}])},4298:function(e,a,t){"use strict";t.r(a);var l=t(5893),s=t(7294);a.default=()=>{let[e,a]=(0,s.useState)(!1),[t,r]=(0,s.useState)(""),[n,d]=(0,s.useState)(""),[i,o]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[x,h]=(0,s.useState)({title:"",desc:"",date:""}),[b,f]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&(j(),N(),g())},[e]);let y=async e=>{e.preventDefault();try{(await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})})).ok?a(!0):alert("Invalid credentials")}catch(e){console.error("Login error:",e)}},j=async()=>{let e=await fetch("/api/gallery");o(await e.json())},N=async()=>{u([{id:1,title:"Garba Dance",desc:"Traditional dance",date:"2023-10-15"}])},g=async()=>{p([{id:1,email:"user@example.com",createdAt:"2023-01-01"}])},v=async e=>{if(e.preventDefault(),!b)return;let a=new FormData;a.append("file",b);try{(await fetch("/api/gallery/upload",{method:"POST",body:a})).ok?(alert("Photo uploaded successfully"),j()):alert("Upload failed")}catch(e){console.error("Upload error:",e)}},w=async e=>{e.preventDefault();try{alert("Event added (placeholder)"),h({title:"",desc:"",date:""}),N()}catch(e){console.error("Add event error:",e)}};return e?(0,l.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Admin Panel"}),(0,l.jsxs)("section",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Manage Gallery"}),(0,l.jsxs)("form",{onSubmit:v,className:"mb-4",children:[(0,l.jsx)("input",{type:"file",onChange:e=>{var a;return f((null===(a=e.target.files)||void 0===a?void 0:a[0])||null)},className:"mb-2"}),(0,l.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded",children:"Upload Photo"})]}),(0,l.jsx)("div",{className:"grid grid-cols-4 gap-4",children:i.map(e=>(0,l.jsx)("img",{src:e.url,alt:e.caption,className:"w-full h-24 object-cover rounded"},e.id))})]}),(0,l.jsxs)("section",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Manage Events"}),(0,l.jsxs)("form",{onSubmit:w,className:"mb-4 space-y-2",children:[(0,l.jsx)("input",{type:"text",placeholder:"Title",value:x.title,onChange:e=>h({...x,title:e.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),(0,l.jsx)("textarea",{placeholder:"Description",value:x.desc,onChange:e=>h({...x,desc:e.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),(0,l.jsx)("input",{type:"date",value:x.date,onChange:e=>h({...x,date:e.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Add Event"})]}),(0,l.jsx)("ul",{children:c.map(e=>(0,l.jsxs)("li",{className:"border p-2 mb-2 rounded",children:[e.title," - ",e.date]},e.id))})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Subscribers"}),(0,l.jsx)("ul",{children:m.map(e=>(0,l.jsxs)("li",{className:"border p-2 mb-2 rounded",children:[e.email," - ",e.createdAt]},e.id))})]})]}):(0,l.jsxs)("div",{className:"max-w-md mx-auto mt-12",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Admin Login"}),(0,l.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Username",value:t,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border rounded",required:!0}),(0,l.jsx)("input",{type:"password",placeholder:"Password",value:n,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border rounded",required:!0}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded",children:"Login"})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=577)}),_N_E=e.O()}]);